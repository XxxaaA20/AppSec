# AppSec
Привет!
В этом репозитории ты найдешь все необходимые материалы для развертывания конвейера по проверке кода на безопасность.
В чём его особенность? - Конвейер не привязан к какой-либо конкретной системе контроля версий и работает полностью в параллель с процессом разработки.
Все используемые инструменты - opensource.
Вот они:
- Jenkins - CI/CD
- Gitleaks - поиск секретов
- Semgrep - SAST
- Cdxgen - сбор компонентов
- Trivy - поиск уязвимостей в компонентах
- DefectDOJO - менеджмент уязвимостей
- PostgreSQL - БАЗА

Как оно всё вместе работает?
- Система контроля версий при выполнении определенных действий в репозитории отправляет в Jenkins запрос. В Jenkins на основании инфы из запроса запускается относящаяся к нужному проекту цепочка пайплайнов со сканерами. Каждый сканер по финалу своей работы отправляет отчет о сканировании в DefectDOJO в соответствующий проект.

Развёртывания по одной кнопке еще нет, так что придется немного посидеть и поразбираться, но чтобы процесс шел быстрее и легче, небольшая подсказака, с чего начинать и куда двигаться по ходу.

1. Нужно подготовить две виртуальные машины для развертывания Jenkins и DefectDOJO. Количество ресурсов зависит от количества проектов и от нагрузки, которая ляжет на плечи конвейера. Начать можно с 4 CPU, 16 Гб ОП, 50 Гб диск. Дальше уже каждый сам за себя :)

2. Всё, что есть в репозитории, готовилось для работы на CentOS

3. Разворачиваем DefectDOJO и начать нужно с БАЗЫ. В каталоге DefectDOJO-PostgreSQL лежат инструкции, как подготовить образы для БД и самой DefectDOJO и всё это развернуть

4. После предыдущего шага можно считать, что треть пути пройдена. Приступаем к развёртыванию CI/CD системы Jenkins. В каталоге Jenkins лежат все необходимые инструкции

5. После настройки CI/CD мы прошли еще одну треть, оставшееся - запуск и подгонка всего и вся под свою инфраструктуру. В зависимотси от используемых систем, их версий, сетевых правил и других особенностей могут быть всплывать разные проблемы, но, как говорится, нет ничего невозможного и нам всё под силу!

*БОНУС
В каталоге Harbor лежат файлы и инструкция, как настроить автоматическую отправку результатов сканера Trivy в DefectDOJO.
